<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <!-- 📸 HR CUSTODY PHOTO MANAGEMENT SYSTEM - Dedicated File -->
    
    <!-- Photo Tabs Extension for Main Form -->
    <record id="hr_custody_photo_tabs" model="ir.ui.view">
        <field name="name">hr.custody.photo.tabs</field>
        <field name="model">hr.custody</field>
        <field name="inherit_id" ref="hr_custody.hr_custody_view_form"/>
        <field name="arch" type="xml">
            <notebook position="inside">
                
                <!-- 📸 Handover Photos Tab -->
                <page string="📸 Handover Photos" 
                      invisible="state not in ['approved', 'returned']">
                    
                    <!-- Photo Guidelines Banner -->
                    <div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; border-radius: 12px; padding: 20px; margin-bottom: 20px; box-shadow: 0 4px 12px rgba(0,0,0,0.15);">
                        <div class="row">
                            <div class="col-md-8">
                                <h4 style="margin: 0 0 12px 0; font-weight: 600;">📸 Handover Photo Guidelines</h4>
                                <div class="row" style="font-size: 13px; line-height: 1.6;">
                                    <div class="col-md-6">
                                        • Take overall photos showing complete item<br/>
                                        • Capture detailed photos of important features<br/>
                                        • Include serial number or identification tags
                                    </div>
                                    <div class="col-md-6">
                                        • Ensure good lighting and clarity<br/>
                                        • Maximum 5MB per photo<br/>
                                        • Multiple angles recommended
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-4 text-right">
                                <div style="font-size: 48px; opacity: 0.7;">📸</div>
                            </div>
                        </div>
                    </div>

                    <!-- Upload Section -->
                    <div style="background: #f8f9fa; border: 2px dashed #dee2e6; border-radius: 16px; padding: 24px; margin-bottom: 24px; transition: all 0.3s ease;">
                        <div class="text-center" style="margin-bottom: 20px;">
                            <div style="background: #007bff; color: white; width: 60px; height: 60px; border-radius: 50%; display: inline-flex; align-items: center; justify-content: center; margin-bottom: 12px; font-size: 24px;">📸</div>
                            <h4 style="color: #007bff; margin-bottom: 8px; font-weight: 600;">Upload Handover Photos</h4>
                            <p style="color: #6c757d; margin: 0;">Drag and drop photos here or click to browse</p>
                        </div>
                        
                        <field name="handover_photo_ids" 
                               widget="many2many_binary"
                               string=""
                               nolabel="1"
                               options="{
                                   'accepted_file_extensions': 'image/*',
                                   'max_upload_size': 5242880
                               }"
                               context="{
                                   'default_custody_photo_type': 'handover_overall',
                                   'default_res_model': 'hr.custody'
                               }"
                               readonly="state == 'returned'"
                               groups="hr.group_hr_user,hr.group_hr_manager"/>
                    </div>

                    <!-- Photo Gallery -->
                    <div invisible="not handover_photo_count">
                        <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 20px; padding-bottom: 12px; border-bottom: 2px solid #e9ecef;">
                            <h4 style="color: #007bff; margin: 0; font-weight: 600; display: flex; align-items: center;">
                                <span style="background: #007bff; color: white; width: 32px; height: 32px; border-radius: 50%; display: inline-flex; align-items: center; justify-content: center; margin-right: 12px; font-size: 16px;">📸</span>
                                Handover Photo Gallery
                            </h4>
                            <span style="background: #e3f2fd; color: #1976d2; padding: 6px 12px; border-radius: 20px; font-size: 14px; font-weight: 500;">
                                <field name="handover_photo_count" nolabel="1"/> photos
                            </span>
                        </div>
                        
                        <field name="handover_photo_ids" 
                               mode="kanban"
                               nolabel="1">
                            <kanban class="o_kanban_mobile" create="false" delete="true">
                                <field name="name"/>
                                <field name="mimetype"/>
                                <field name="custody_photo_type"/>
                                <field name="file_size"/>
                                <field name="datas"/>
                                <field name="checksum"/>
                                <templates>
                                    <t t-name="kanban-box">
                                        <div style="
                                            width: 300px; 
                                            margin: 12px; 
                                            background: white;
                                            border: 1px solid #e0e0e0;
                                            border-radius: 16px;
                                            box-shadow: 0 4px 16px rgba(0,0,0,0.08);
                                            overflow: hidden;
                                            transition: all 0.3s ease;
                                        ">
                                            <!-- Photo Display -->
                                            <div style="position: relative; background: #f5f5f5;">
                                                <t t-if="record.mimetype.raw_value and record.mimetype.raw_value.indexOf('image') == 0">
                                                    <a t-att-href="'/web/image/ir.attachment/' + record.id.raw_value + '/datas'" target="_blank">
                                                        <img t-att-src="'/web/image/ir.attachment/' + record.id.raw_value + '/datas'" 
                                                             style="
                                                                width: 100%; 
                                                                height: 200px; 
                                                                object-fit: cover;
                                                                cursor: pointer;
                                                                transition: transform 0.3s ease;
                                                             "
                                                             t-att-alt="record.name.value"/>
                                                    </a>
                                                </t>
                                                <t t-else="">
                                                    <div style="width: 100%; height: 200px; display: flex; align-items: center; justify-content: center; background: #f0f0f0;">
                                                        <i class="fa fa-file-image-o fa-3x" style="color: #bbb;"/>
                                                    </div>
                                                </t>
                                                
                                                <!-- Photo Type Badge -->
                                                <div style="position: absolute; top: 12px; right: 12px;">
                                                    <t t-if="record.custody_photo_type.raw_value == 'handover_overall'">
                                                        <span style="
                                                            background: linear-gradient(135deg, #007bff, #0056b3); 
                                                            color: white; 
                                                            padding: 6px 12px; 
                                                            border-radius: 20px; 
                                                            font-size: 11px; 
                                                            font-weight: 600;
                                                            box-shadow: 0 2px 8px rgba(0,123,255,0.3);
                                                        ">📸 Overall</span>
                                                    </t>
                                                    <t t-elif="record.custody_photo_type.raw_value == 'handover_detail'">
                                                        <span style="
                                                            background: linear-gradient(135deg, #17a2b8, #138496); 
                                                            color: white; 
                                                            padding: 6px 12px; 
                                                            border-radius: 20px; 
                                                            font-size: 11px; 
                                                            font-weight: 600;
                                                            box-shadow: 0 2px 8px rgba(23,162,184,0.3);
                                                        ">🔍 Detail</span>
                                                    </t>
                                                    <t t-elif="record.custody_photo_type.raw_value == 'handover_serial'">
                                                        <span style="
                                                            background: linear-gradient(135deg, #6c757d, #545b62); 
                                                            color: white; 
                                                            padding: 6px 12px; 
                                                            border-radius: 20px; 
                                                            font-size: 11px; 
                                                            font-weight: 600;
                                                            box-shadow: 0 2px 8px rgba(108,117,125,0.3);
                                                        ">🏷️ Serial</span>
                                                    </t>
                                                </div>
                                            </div>
                                            
                                            <!-- Photo Info -->
                                            <div style="padding: 16px;">
                                                <div style="
                                                    font-weight: 600; 
                                                    font-size: 14px; 
                                                    color: #2c3e50; 
                                                    margin-bottom: 12px;
                                                    overflow: hidden; 
                                                    text-overflow: ellipsis; 
                                                    white-space: nowrap;
                                                " t-att-title="record.name.value">
                                                    <field name="name"/>
                                                </div>
                                                
                                                <div style="
                                                    display: flex; 
                                                    justify-content: space-between; 
                                                    align-items: center;
                                                ">
                                                    <span style="
                                                        background: #f8f9fa; 
                                                        color: #495057; 
                                                        padding: 4px 8px; 
                                                        border-radius: 8px;
                                                        font-size: 12px;
                                                        font-weight: 500;
                                                    ">
                                                        💾 <t t-esc="Math.round(record.file_size.raw_value / 1024)"/> KB
                                                    </span>
                                                </div>
                                            </div>
                                        </div>
                                    </t>
                                </templates>
                            </kanban>
                        </field>
                    </div>

                    <!-- Empty State -->
                    <div invisible="handover_photo_count" style="text-align: center; padding: 60px 20px; background: #f8f9fa; border-radius: 16px; border: 2px dashed #dee2e6;">
                        <div style="font-size: 64px; color: #dee2e6; margin-bottom: 20px;">📸</div>
                        <h4 style="color: #6c757d; margin-bottom: 12px;">No Handover Photos Yet</h4>
                        <p style="color: #adb5bd; margin: 0;">Upload photos using the area above to document the handover condition</p>
                    </div>
                </page>

                <!-- 📦 Return Photos Tab -->
                <page string="📦 Return Photos" 
                      invisible="state != 'returned'">
                    
                    <!-- Guidelines Banner -->
                    <div style="background: linear-gradient(135deg, #28a745 0%, #20c997 100%); color: white; border-radius: 12px; padding: 20px; margin-bottom: 20px; box-shadow: 0 4px 12px rgba(0,0,0,0.15);">
                        <div class="row">
                            <div class="col-md-8">
                                <h4 style="margin: 0 0 12px 0; font-weight: 600;">📦 Return Photo Guidelines</h4>
                                <div class="row" style="font-size: 13px; line-height: 1.6;">
                                    <div class="col-md-6">
                                        • Document the condition when returned<br/>
                                        • Show any damage or wear clearly<br/>
                                        • Compare with handover condition
                                    </div>
                                    <div class="col-md-6">
                                        • Include any missing accessories<br/>
                                        • Take photos from same angles as handover<br/>
                                        • Note any changes or issues
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-4 text-right">
                                <div style="font-size: 48px; opacity: 0.7;">📦</div>
                            </div>
                        </div>
                    </div>

                    <!-- Upload Section -->
                    <div style="background: #f8f9fa; border: 2px dashed #dee2e6; border-radius: 16px; padding: 24px; margin-bottom: 24px; transition: all 0.3s ease;">
                        <div class="text-center" style="margin-bottom: 20px;">
                            <div style="background: #28a745; color: white; width: 60px; height: 60px; border-radius: 50%; display: inline-flex; align-items: center; justify-content: center; margin-bottom: 12px; font-size: 24px;">📦</div>
                            <h4 style="color: #28a745; margin-bottom: 8px; font-weight: 600;">Upload Return Photos</h4>
                            <p style="color: #6c757d; margin: 0;">Drag and drop photos here or click to browse</p>
                        </div>
                        
                        <field name="return_photo_ids" 
                               widget="many2many_binary"
                               string=""
                               nolabel="1"
                               options="{
                                   'accepted_file_extensions': 'image/*',
                                   'max_upload_size': 5242880
                               }"
                               context="{
                                   'default_custody_photo_type': 'return_overall',
                                   'default_res_model': 'hr.custody'
                               }"
                               groups="hr.group_hr_user,hr.group_hr_manager"/>
                    </div>

                    <!-- Return Photo Gallery -->
                    <div invisible="not return_photo_count">
                        <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 20px; padding-bottom: 12px; border-bottom: 2px solid #e9ecef;">
                            <h4 style="color: #28a745; margin: 0; font-weight: 600; display: flex; align-items: center;">
                                <span style="background: #28a745; color: white; width: 32px; height: 32px; border-radius: 50%; display: inline-flex; align-items: center; justify-content: center; margin-right: 12px; font-size: 16px;">📦</span>
                                Return Photo Gallery
                            </h4>
                            <span style="background: #e8f5e8; color: #2e7d32; padding: 6px 12px; border-radius: 20px; font-size: 14px; font-weight: 500;">
                                <field name="return_photo_count" nolabel="1"/> photos
                            </span>
                        </div>
                        
                        <field name="return_photo_ids" 
                               mode="kanban"
                               nolabel="1">
                            <kanban class="o_kanban_mobile" create="false" delete="true">
                                <field name="name"/>
                                <field name="mimetype"/>
                                <field name="custody_photo_type"/>
                                <field name="file_size"/>
                                <field name="datas"/>
                                <field name="checksum"/>
                                <templates>
                                    <t t-name="kanban-box">
                                        <div style="
                                            width: 300px; 
                                            margin: 12px; 
                                            background: white;
                                            border: 1px solid #e0e0e0;
                                            border-radius: 16px;
                                            box-shadow: 0 4px 16px rgba(0,0,0,0.08);
                                            overflow: hidden;
                                            transition: all 0.3s ease;
                                        ">
                                            <!-- Photo Display -->
                                            <div style="position: relative; background: #f5f5f5;">
                                                <t t-if="record.mimetype.raw_value and record.mimetype.raw_value.indexOf('image') == 0">
                                                    <a t-att-href="'/web/image/ir.attachment/' + record.id.raw_value + '/datas'" target="_blank">
                                                        <img t-att-src="'/web/image/ir.attachment/' + record.id.raw_value + '/datas'" 
                                                             style="
                                                                width: 100%; 
                                                                height: 200px; 
                                                                object-fit: cover;
                                                                cursor: pointer;
                                                                transition: transform 0.3s ease;
                                                             "
                                                             t-att-alt="record.name.value"/>
                                                    </a>
                                                </t>
                                                <t t-else="">
                                                    <div style="width: 100%; height: 200px; display: flex; align-items: center; justify-content: center; background: #f0f0f0;">
                                                        <i class="fa fa-file-image-o fa-3x" style="color: #bbb;"/>
                                                    </div>
                                                </t>
                                                
                                                <!-- Photo Type Badge -->
                                                <div style="position: absolute; top: 12px; right: 12px;">
                                                    <t t-if="record.custody_photo_type.raw_value == 'return_overall'">
                                                        <span style="
                                                            background: linear-gradient(135deg, #28a745, #1e7e34); 
                                                            color: white; 
                                                            padding: 6px 12px; 
                                                            border-radius: 20px; 
                                                            font-size: 11px; 
                                                            font-weight: 600;
                                                            box-shadow: 0 2px 8px rgba(40,167,69,0.3);
                                                        ">📦 Overall</span>
                                                    </t>
                                                    <t t-elif="record.custody_photo_type.raw_value == 'return_detail'">
                                                        <span style="
                                                            background: linear-gradient(135deg, #ffc107, #e0a800); 
                                                            color: #212529; 
                                                            padding: 6px 12px; 
                                                            border-radius: 20px; 
                                                            font-size: 11px; 
                                                            font-weight: 600;
                                                            box-shadow: 0 2px 8px rgba(255,193,7,0.3);
                                                        ">🔍 Detail</span>
                                                    </t>
                                                    <t t-elif="record.custody_photo_type.raw_value == 'return_damage'">
                                                        <span style="
                                                            background: linear-gradient(135deg, #dc3545, #c82333); 
                                                            color: white; 
                                                            padding: 6px 12px; 
                                                            border-radius: 20px; 
                                                            font-size: 11px; 
                                                            font-weight: 600;
                                                            box-shadow: 0 2px 8px rgba(220,53,69,0.3);
                                                        ">⚠️ Damage</span>
                                                    </t>
                                                </div>
                                            </div>
                                            
                                            <!-- Photo Info -->
                                            <div style="padding: 16px;">
                                                <div style="
                                                    font-weight: 600; 
                                                    font-size: 14px; 
                                                    color: #2c3e50; 
                                                    margin-bottom: 12px;
                                                    overflow: hidden; 
                                                    text-overflow: ellipsis; 
                                                    white-space: nowrap;
                                                " t-att-title="record.name.value">
                                                    <field name="name"/>
                                                </div>
                                                
                                                <div style="
                                                    display: flex; 
                                                    justify-content: space-between; 
                                                    align-items: center;
                                                ">
                                                    <span style="
                                                        background: #f8f9fa; 
                                                        color: #495057; 
                                                        padding: 4px 8px; 
                                                        border-radius: 8px;
                                                        font-size: 12px;
                                                        font-weight: 500;
                                                    ">
                                                        💾 <t t-esc="Math.round(record.file_size.raw_value / 1024)"/> KB
                                                    </span>
                                                </div>
                                            </div>
                                        </div>
                                    </t>
                                </templates>
                            </kanban>
                        </field>
                    </div>

                    <!-- Empty State -->
                    <div invisible="return_photo_count" style="text-align: center; padding: 60px 20px; background: #f8f9fa; border-radius: 16px; border: 2px dashed #dee2e6;">
                        <div style="font-size: 64px; color: #dee2e6; margin-bottom: 20px;">📦</div>
                        <h4 style="color: #6c757d; margin-bottom: 12px;">No Return Photos Yet</h4>
                        <p style="color: #adb5bd; margin: 0;">Upload photos using the area above to document the return condition</p>
                    </div>
                </page>

                <!-- 🔍 Photo Comparison Tab -->
                <page string="🔍 Photo Comparison" 
                      invisible="state != 'returned' or not has_handover_photos or not has_return_photos">
                    
                    <!-- Comparison Header -->
                    <div style="background: linear-gradient(135deg, #6f42c1 0%, #e83e8c 100%); color: white; border-radius: 12px; padding: 20px; margin-bottom: 24px; box-shadow: 0 4px 12px rgba(0,0,0,0.15);">
                        <div class="row">
                            <div class="col-md-8">
                                <h4 style="margin: 0 0 8px 0; font-weight: 600;">🔍 Photo Comparison Analysis</h4>
                                <p style="margin: 0; opacity: 0.9;">Compare handover vs return condition side by side</p>
                            </div>
                            <div class="col-md-4 text-right">
                                <div style="font-size: 48px; opacity: 0.7;">🔍</div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="row">
                        <div class="col-md-6">
                            <div style="background: linear-gradient(135deg, #e3f2fd 0%, #bbdefb 100%); border-radius: 12px; padding: 16px; margin-bottom: 16px;">
                                <h4 style="color: #1976d2; margin: 0; font-weight: 600;">📸 Handover Condition</h4>
                            </div>
                            <field name="handover_photo_ids" 
                                   mode="kanban"
                                   nolabel="1">
                                <kanban class="o_kanban_mobile" create="false" delete="false">
                                    <field name="name"/>
                                    <field name="mimetype"/>
                                    <field name="datas"/>
                                    <templates>
                                        <t t-name="kanban-box">
                                            <div style="margin: 8px; max-width: 200px; border-radius: 12px; overflow: hidden; box-shadow: 0 4px 12px rgba(0,0,0,0.1); background: white;">
                                                <div style="text-align: center;">
                                                    <t t-if="record.mimetype.raw_value and record.mimetype.raw_value.indexOf('image') == 0">
                                                        <a t-att-href="'/web/image/ir.attachment/' + record.id.raw_value + '/datas'" target="_blank">
                                                            <img t-att-src="'/web/image/ir.attachment/' + record.id.raw_value + '/datas'" 
                                                                 style="width: 100%; height: 140px; object-fit: cover; cursor: pointer;"
                                                                 t-att-alt="record.name.value"/>
                                                        </a>
                                                    </t>
                                                </div>
                                            </div>
                                        </t>
                                    </templates>
                                </kanban>
                            </field>
                        </div>
                        <div class="col-md-6">
                            <div style="background: linear-gradient(135deg, #e8f5e8 0%, #c8e6c9 100%); border-radius: 12px; padding: 16px; margin-bottom: 16px;">
                                <h4 style="color: #2e7d32; margin: 0; font-weight: 600;">📦 Return Condition</h4>
                            </div>
                            <field name="return_photo_ids" 
                                   mode="kanban"
                                   nolabel="1">
                                <kanban class="o_kanban_mobile" create="false" delete="false">
                                    <field name="name"/>
                                    <field name="mimetype"/>
                                    <field name="datas"/>
                                    <templates>
                                        <t t-name="kanban-box">
                                            <div style="margin: 8px; max-width: 200px; border-radius: 12px; overflow: hidden; box-shadow: 0 4px 12px rgba(0,0,0,0.1); background: white;">
                                                <div style="text-align: center;">
                                                    <t t-if="record.mimetype.raw_value and record.mimetype.raw_value.indexOf('image') == 0">
                                                        <a t-att-href="'/web/image/ir.attachment/' + record.id.raw_value + '/datas'" target="_blank">
                                                            <img t-att-src="'/web/image/ir.attachment/' + record.id.raw_value + '/datas'" 
                                                                 style="width: 100%; height: 140px; object-fit: cover; cursor: pointer;"
                                                                 t-att-alt="record.name.value"/>
                                                        </a>
                                                    </t>
                                                </div>
                                            </div>
                                        </t>
                                    </templates>
                                </kanban>
                            </field>
                        </div>
                    </div>

                    <!-- Documentation Summary -->
                    <div style="background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%); border-radius: 12px; padding: 20px; margin-top: 24px;">
                        <h5 style="color: #495057; margin-bottom: 16px; font-weight: 600;">📊 Documentation Summary</h5>
                        <div class="row">
                            <div class="col-md-3">
                                <div style="text-align: center; padding: 12px;">
                                    <div style="font-size: 24px; font-weight: 700; color: #007bff;"><field name="handover_photo_count" nolabel="1"/></div>
                                    <div style="font-size: 12px; color: #6c757d; text-transform: uppercase; letter-spacing: 1px;">Handover Photos</div>
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div style="text-align: center; padding: 12px;">
                                    <div style="font-size: 24px; font-weight: 700; color: #28a745;"><field name="return_photo_count" nolabel="1"/></div>
                                    <div style="font-size: 12px; color: #6c757d; text-transform: uppercase; letter-spacing: 1px;">Return Photos</div>
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div style="text-align: center; padding: 12px;">
                                    <div style="font-size: 24px; font-weight: 700; color: #6f42c1;"><field name="total_photo_count" nolabel="1"/></div>
                                    <div style="font-size: 12px; color: #6c757d; text-transform: uppercase; letter-spacing: 1px;">Total Photos</div>
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div style="text-align: center; padding: 12px;">
                                    <div style="font-size: 20px;">
                                        <span style="color: #28a745;" invisible="not photos_complete">✅ Complete</span>
                                        <span style="color: #ffc107;" invisible="photos_complete">⚠️ Incomplete</span>
                                    </div>
                                    <div style="font-size: 12px; color: #6c757d; text-transform: uppercase; letter-spacing: 1px;">Documentation</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </page>
            </notebook>
        </field>
    </record>

    <!-- Photo Comparison Popup View -->
    <record id="hr_custody_photo_comparison_view_form" model="ir.ui.view">
        <field name="name">hr.custody.photo.comparison.form</field>
        <field name="model">hr.custody</field>
        <field name="arch" type="xml">
            <form string="Photo Comparison" create="false" edit="false">
                <sheet>
                    <h2>🔍 Photo Comparison: <field name="name" nolabel="1" readonly="1"/></h2>
                    <group>
                        <group>
                            <field name="employee_id" readonly="1"/>
                            <field name="custody_property_id" readonly="1"/>
                        </group>
                        <group>
                            <field name="approved_date" readonly="1"/>
                            <field name="actual_return_date" readonly="1"/>
                        </group>
                    </group>
                    
                    <div class="row mt16">
                        <div class="col-md-6">
                            <h3>📸 Handover Condition</h3>
                            <field name="handover_photo_ids" 
                                   mode="kanban"
                                   nolabel="1">
                                <kanban class="o_kanban_mobile" create="false" delete="false">
                                    <field name="name"/>
                                    <field name="mimetype"/>
                                    <field name="datas"/>
                                    <templates>
                                        <t t-name="kanban-box">
                                            <div class="oe_kanban_card" style="margin: 5px; max-width: 150px;">
                                                <div style="text-align: center;">
                                                    <t t-if="record.mimetype.raw_value and record.mimetype.raw_value.indexOf('image') == 0">
                                                        <a t-att-href="'/web/image/ir.attachment/' + record.id.raw_value + '/datas'" target="_blank">
                                                            <img t-att-src="'/web/image/ir.attachment/' + record.id.raw_value + '/datas'" 
                                                                 style="max-width: 120px; max-height: 90px; border-radius: 4px;"
                                                                 t-att-alt="record.name.value"/>
                                                        </a>
                                                    </t>
                                                </div>
                                            </div>
                                        </t>
                                    </templates>
                                </kanban>
                            </field>
                        </div>
                        <div class="col-md-6">
                            <h3>📦 Return Condition</h3>
                            <field name="return_photo_ids" 
                                   mode="kanban"
                                   nolabel="1">
                                <kanban class="o_kanban_mobile" create="false" delete="false">
                                    <field name="name"/>
                                    <field name="mimetype"/>
                                    <field name="datas"/>
                                    <templates>
                                        <t t-name="kanban-box">
                                            <div class="oe_kanban_card" style="margin: 5px; max-width: 150px;">
                                                <div style="text-align: center;">
                                                    <t t-if="record.mimetype.raw_value and record.mimetype.raw_value.indexOf('image') == 0">
                                                        <a t-att-href="'/web/image/ir.attachment/' + record.id.raw_value + '/datas'" target="_blank">
                                                            <img t-att-src="'/web/image/ir.attachment/' + record.id.raw_value + '/datas'" 
                                                                 style="max-width: 120px; max-height: 90px; border-radius: 4px;"
                                                                 t-att-alt="record.name.value"/>
                                                        </a>
                                                    </t>
                                                </div>
                                            </div>
                                        </t>
                                    </templates>
                                </kanban>
                            </field>
                        </div>
                    </div>
                </sheet>
            </form>
        </field>
    </record>
</odoo>